{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{529:function(s,a,n){\"use strict\";n.r(a);var t=n(30),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[n(\"p\",[s._v(\"Nginx 是全球使用最广泛的 web servers 之一。\\n它甚至负责托管互联网上一些超级大流量的网站也不在话下。很多情况下，它比 Apache 占用更少资源，并且可以使用它作为 Web 服务器或反向代理来使用。\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"前言\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#前言\"}},[s._v(\"#\")]),s._v(\" 前言\")]),s._v(\" \"),n(\"p\",[s._v(\"Nginx 发音 “engine x” ,是一个开源软件，高性能 HTTP 和反向代理服务器，用来在互联网上处理一些大型网站。它可以被用作独立网站服务器，负载均衡，内容缓存和针对 HTTP 和非 HTTP 的反向代理服务器。和 Apache相比，Nginx 可以处理大量的并发连接，并且每个连接占用一个很小的内存。\")]),s._v(\" \"),n(\"p\",[s._v(\"本教程主要描述如何在 Ubuntu 20.04 中安装和配置 Nginx。\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"准备工作\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#准备工作\"}},[s._v(\"#\")]),s._v(\" 准备工作\")]),s._v(\" \"),n(\"p\",[s._v(\"要根据本教程学习，首先我们要有一台安装好 Ubuntu 20.04 的服务器。且保证以 sudo 用户身份登录，不能运行 Apache 或者 其他处理进程在80端口和443端口。\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"第-1-步-安装-nginx\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#第-1-步-安装-nginx\"}},[s._v(\"#\")]),s._v(\" 第 1 步：安装 Nginx\")]),s._v(\" \"),n(\"p\",[s._v(\"由于 Nginx 可以从 ubuntu 源仓库中获得，因此我们可以使用 apt 来安装 Nginx。\")]),s._v(\" \"),n(\"p\",[s._v(\"我们可以使用以下命令安装 Nginx 到 Ubuntu 中。\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"apt\")]),s._v(\" update\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"apt\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" nginx\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\")])]),n(\"p\",[s._v(\"选择 Y 来开始安装，apt 会帮你把 Nginx 和它所必备的依赖安装到我们的服务器中。\")]),s._v(\" \"),n(\"p\",[s._v(\"一旦安装完成，Nginx 将会自动被启动。你可以运行下面的命令来验证它：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-text line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v(\"sudo systemctl status nginx\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"输出类似下面这样：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-text line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v(\"● nginx.service - A high performance web server and a reverse proxy server\\n     Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)\\n     Active: active (running) since Sat 2020-05-02 20:25:43 UTC; 13s ago\\n...\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\")])]),n(\"h2\",{attrs:{id:\"第-2-步-配置防火墙\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#第-2-步-配置防火墙\"}},[s._v(\"#\")]),s._v(\" 第 2 步：配置防火墙\")]),s._v(\" \"),n(\"p\",[s._v(\"现在你已经在你的服务器上安装和运行了 Nginx，你需要确保你的防火墙被配置好，允许流量通过 HTTP（\"),n(\"code\",[s._v(\"80\")]),s._v(\"）和 HTTPS（\"),n(\"code\",[s._v(\"443\")]),s._v(\"）端口。\\n在测试 Nginx 之前，我们需要调整防火墙，让他允许 Nginx 服务通过。Nginx \"),n(\"code\",[s._v(\"ufw\")]),s._v(\" 在安装时会把他自身注册成为服务。\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" ufw app list\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"输出结果：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[s._v(\"kalasearch@chuan-server:~$ \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" ufw app list\\nAvailable applications:\\n  Nginx Full\\n  Nginx HTTP\\n  Nginx HTTPS\\n  OpenSSH\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\")])]),n(\"p\",[s._v(\"你可以看到 Nginx 提供了三个配置文件：\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[n(\"p\",[n(\"strong\",[s._v(\"Nginx Full\")])]),s._v(\" \"),n(\"p\",[s._v(\"开端口80 正常，未加密的网络流量\")]),s._v(\" \"),n(\"p\",[s._v(\"端口443 TLS / SSL加密的流量\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[n(\"strong\",[s._v(\"Nginx HTTP\")])]),s._v(\" \"),n(\"p\",[s._v(\"仅打开端口80 正常，未加密\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[n(\"strong\",[s._v(\"Nginx HTTPS\")])]),s._v(\" \"),n(\"p\",[s._v(\"仅打开端口443 TLS / SSL加密\")])])]),s._v(\" \"),n(\"p\",[s._v(\"我们使用 Nginx HTTP 来做本教程演示。\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" ufw allow \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'Nginx Full'\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"我们用以下命令来查看更改结果\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" ufw status\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"我们可以在输出结果中看到\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[s._v(\"Status: active\\n\\nTo                         Action      From\\n--                         ------      ----\\nOpenSSH                    ALLOW       Anywhere                  \\nNginx Full                 ALLOW       Anywhere                  \\nOpenSSH \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"v6\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"               ALLOW       Anywhere \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"v6\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"             \\nNginx HTTP \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"v6\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"            ALLOW       Anywhere \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"v6\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\")])]),n(\"h2\",{attrs:{id:\"第3步-检查我们的-web-服务器\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#第3步-检查我们的-web-服务器\"}},[s._v(\"#\")]),s._v(\" 第3步：检查我们的 Web 服务器\")]),s._v(\" \"),n(\"p\",[s._v(\"在安装结束后，Ubuntu 会启动 Nginx 。 Web 服务器应该已经在运行了。\")]),s._v(\" \"),n(\"p\",[s._v(\"我们可以通过 \"),n(\"code\",[s._v(\"systemd\")]),s._v(\" 来检查 init 系统状态，确保它正在运行：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[s._v(\"systemctl status nginx\\nkalasearch@chuan-server:~$ systemctl status nginx\\n● nginx.service - A high performance web server and a reverse proxy server\\n     Loaded: loaded \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"/lib/systemd/system/nginx.service\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" enabled\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" vendor preset:\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\n     Active: active \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"running\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" since Wed \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2020\")]),s._v(\"-07-29 07:21:53 UTC\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" 23min ago\\n       Docs: man:nginx\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"8\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n   Main PID: \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"3340\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"nginx\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n      Tasks: \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"limit: \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2248\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n     Memory: \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4\")]),s._v(\".3M\\n     CGroup: /system.slice/nginx.service\\n             ├─3340 nginx: master process /usr/sbin/nginx -g daemon on\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" master_\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\n             └─3341 nginx: worker process\\n\\nJul \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"29\")]),s._v(\" 07:21:52 chuan-server systemd\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\": Starting A high performance web server\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\nJul \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"29\")]),s._v(\" 07:21:53 chuan-server systemd\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\": Started A high performance web server \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\nlines \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),s._v(\"-13/13 \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"END\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\")])]),n(\"p\",[s._v(\"如上所示，这个服务已经成功启动。接下来我们要直接来测试 Nginx 是否可以通过浏览器访问。\")]),s._v(\" \"),n(\"p\",[s._v(\"首先我们执行以下命令：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ip\")]),s._v(\" addr show eth0 \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"|\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"grep\")]),s._v(\" inet \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"|\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"awk\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'{ print $2; }'\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"|\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sed\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'s/\\\\/.*$//'\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"这可以让我们在浏览器中查看他们是否正常工作。\")]),s._v(\" \"),n(\"p\",[s._v(\"接着我们要找到服务器在公网上的ip，我们可以使用这个命令\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"curl\")]),s._v(\" -4 icanhazip.com\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"获得服务器ip后，我们可以在浏览器输入这个 ip 。当然除了公网，我们也可以输入主机的内网 ip 通过局域网来访问。\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[s._v(\"http://your_server_ip\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"打开浏览器输入ip你就可以看到默认的 Nginx 加载页面。这说明服务器运行起来了。\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"第-4-步-管理-nginx\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#第-4-步-管理-nginx\"}},[s._v(\"#\")]),s._v(\" 第 4 步：管理 Nginx\")]),s._v(\" \"),n(\"p\",[s._v(\"现在，您已启动并运行了Web服务器，让我们回顾一些基本的管理命令。\")]),s._v(\" \"),n(\"p\",[s._v(\"上一步，我们已经启动起来 Web 服务器了。接下来，让我们来学习一下 Nginx 的基本命令。\")]),s._v(\" \"),n(\"p\",[s._v(\"要停止Web服务器，输入：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl stop nginx\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"要在停止时，启动Web服务器，键入：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl start nginx\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"要停止，然后再次启动该服务，键入：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl restart nginx\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"如果我们只是修改配置，Nginx 可以在不终止终端的情况下热加载。我们可以键入：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl reload nginx\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"默认情况下，Nginx 会在服务器启动时，跟随系统启动，如果我们不想这样，我们可以用这个命令来禁止：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl disable nginx\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"要重新让系统启动时引导 Nginx 启动，那么我们可以输入：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl \"),n(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"enable\")]),s._v(\" nginx\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"h2\",{attrs:{id:\"第5步-设置服务器块-server-block\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#第5步-设置服务器块-server-block\"}},[s._v(\"#\")]),s._v(\" 第5步：设置服务器块（Server block）\")]),s._v(\" \"),n(\"p\",[s._v(\"使用Nginx Web服务器时，\"),n(\"em\",[s._v(\"服务器块\")]),s._v(\"（类似于Apache中的虚拟主机）可用于封装配置详细信息，并在一台服务器中托管多个域。我们将建立一个名为 \"),n(\"strong\",[s._v(\"example.com\")]),s._v(\" 的域，但我们可以\"),n(\"strong\",[s._v(\"用自己的域名替换它\")]),s._v(\"。\")]),s._v(\" \"),n(\"p\",[s._v(\"在 Ubuntu 上的 Nginx 默认情况下启用了一个服务器块（server block），服务器块的配置是为给服务器的目录提供地址 \"),n(\"code\",[s._v(\"/var/www/html\")]),s._v(\"。尽管这对于单个站点非常有效，但是如果我们在服务器上托管多个站点，则可能变很臃肿。让我们给\"),n(\"code\",[s._v(\"/var/www/html\")]),s._v(\"目录添加上分站点目录。\")]),s._v(\" \"),n(\"p\",[s._v(\"比如我们的网站是 zervan.cn ，那我们创建一个对应的目录 zervan.cn 目录：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"mkdir\")]),s._v(\" -p /var/www/zervan.cn/html\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"接下来，使用\"),n(\"code\",[s._v(\"$USER\")]),s._v(\"环境变量分配目录的所有权：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"chown\")]),s._v(\" -R \"),n(\"span\",{pre:!0,attrs:{class:\"token environment constant\"}},[s._v(\"$USER\")]),n(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\":\")]),n(\"span\",{pre:!0,attrs:{class:\"token environment constant\"}},[s._v(\"$USER\")]),s._v(\" /var/www/zervan.cn/html\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"如果我们没有修改自己的\"),n(\"code\",[s._v(\"umask\")]),s._v(\"值，那么 Web 根目录的权限应该正确，我们可以通过输入以下命令来确认：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"chmod\")]),s._v(\" -R \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"755\")]),s._v(\" /var/www/zervan.cn\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"接下来，让我们来编辑\"),n(\"code\",[s._v(\"index.html\")]),s._v(\" ：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vi\")]),s._v(\" /var/www/zervan.cn/html/index.html\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"在其中，添加以下示例HTML：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-html line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-html\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"<\")]),s._v(\"html\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"<\")]),s._v(\"head\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"<\")]),s._v(\"title\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\"Welcome to zervan.cn!\"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"</\")]),s._v(\"title\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"</\")]),s._v(\"head\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"<\")]),s._v(\"body\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"<\")]),s._v(\"h1\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\"Success!  The zervan.cn server block is working!\"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"</\")]),s._v(\"h1\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"</\")]),s._v(\"body\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"</\")]),s._v(\"html\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")])]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\")])]),n(\"p\",[s._v(\"完成后保存并关闭文件。\")]),s._v(\" \"),n(\"p\",[s._v(\"接下来我们为 Nginx 来创建一个服务器块。与直接修改默认配置文件不同，我们在以下位置创建一个新文件：\"),n(\"code\",[s._v(\"/etc/nginx/sites-available/zervan.cn\")])]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vi\")]),s._v(\" /etc/nginx/sites-available/zervan.cn\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"粘贴到以下内容添加到文件中，这个块的配置与默认块的配置相似，但针对我们的新目录和域名进行了更新：\")]),s._v(\" \"),n(\"p\",[s._v(\"/etc/nginx/sites-available/zervan.cn\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-html line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-html\"}},[n(\"code\",[s._v(\"server {\\n        listen 80;\\n        listen [::]:80;\\n        root /var/www/zervan.cn/html;\\n        index index.html index.htm index.nginx-debian.html;\\n        server_name zervan.cn www.zervan.cn;\\n        location / {\\n                try_files $uri $uri/ =404;\\n        }\\n}\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\")])]),n(\"p\",[s._v(\"接下来，让我们通过在\"),n(\"code\",[s._v(\"sites-enabled\")]),s._v(\"目录新建一个链接，好让 Nginx 在启动过程中会读取这个目录：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ln\")]),s._v(\" -s /etc/nginx/sites-available/zervan.cn /etc/nginx/sites-enabled/\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"现在已启用并配置了两个服务器块，以及基于它们的\"),n(\"code\",[s._v(\"listen\")]),s._v(\"和\"),n(\"code\",[s._v(\"server_name\")]),s._v(\"指令响应请求：\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[n(\"code\",[s._v(\"zervan.cn\")]),s._v(\": 将会响应\"),n(\"code\",[s._v(\"zervan.cn\")]),s._v(\" 和 \"),n(\"code\",[s._v(\"www.zervan.cn\")]),s._v(\"的请求\")]),s._v(\" \"),n(\"li\",[n(\"code\",[s._v(\"default\")]),s._v(\": 将会响应 80 端口的请求，以及不能匹配到两个服务器块上的请求\")])]),s._v(\" \"),n(\"p\",[s._v(\"为避免可能由于添加其他服务器名称而引起的哈希存储区内存问题，有必要调整\"),n(\"code\",[s._v(\"/etc/nginx/nginx.conf\")]),s._v(\"文件中的单个值。\")]),s._v(\" \"),n(\"p\",[s._v(\"打开文件：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vi\")]),s._v(\" /etc/nginx/nginx.conf\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"找到\"),n(\"code\",[s._v(\"server_names_hash_bucket_size\")]),s._v(\"指令并删除\"),n(\"code\",[s._v(\"#\")]),s._v(\"符号：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"..\")]),s._v(\".\\nhttp \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"..\")]),s._v(\".\\n    server_names_hash_bucket_size \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"64\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"..\")]),s._v(\".\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"..\")]),s._v(\".\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\")])]),n(\"p\",[s._v(\"完成后保存并关闭文件。\")]),s._v(\" \"),n(\"p\",[s._v(\"接下来，测试以确保我们在 Nginx 文件中的改动，没有任何问题：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" nginx -t\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"如果没有任何问题，请重新启动 Nginx：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl restart nginx\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\")])]),n(\"p\",[s._v(\"Nginx 现在已经可以按照刚刚我们配置的方式来工作啦。当用户通过\"),n(\"code\",[s._v(\"http://example.com\")]),s._v(\"域名访问我们的服务器时，Nginx 会将它指向我们刚刚创建的 Html 页面。\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"第-6-步-学习-nginx-文件及目录结构\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#第-6-步-学习-nginx-文件及目录结构\"}},[s._v(\"#\")]),s._v(\" 第 6 步 学习 Nginx 文件及目录结构\")]),s._v(\" \"),n(\"p\",[s._v(\"到这一步，我们已经了解了如何在 Ubuntu 上安装和配置 Nginx 服务。接下来，我们来了解 Nginx 的文件及目录结构。\")]),s._v(\" \"),n(\"h3\",{attrs:{id:\"内容\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#内容\"}},[s._v(\"#\")]),s._v(\" 内容\")]),s._v(\" \"),n(\"p\",[n(\"code\",[s._v(\"/var/www/html\")]),s._v(\" 默认的 Web 页面。默认打开可以看到 Nginx 页面。我们可以通过更改 Nginx 配置来更改文件。\")]),s._v(\" \"),n(\"h3\",{attrs:{id:\"服务器配置\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#服务器配置\"}},[s._v(\"#\")]),s._v(\" 服务器配置\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[n(\"code\",[s._v(\"/etc/nginx\")]),s._v(\" Nginx 配置目录。所有 Nginx 的配置文件都在这里。\")]),s._v(\" \"),n(\"li\",[n(\"code\",[s._v(\"/etc/nginx/nginx.conf\")]),s._v(\" Nginx 的配置文件。大多数全局配置可以通过这个文件来修改。\")]),s._v(\" \"),n(\"li\",[n(\"code\",[s._v(\"/etc/nginx/sites-available/sites-enabled\")]),s._v(\" 用来存储服务器下每个站点服务器块的目录。 默认情况下 Nginx 不会直接使用目录下的配置文件，需要我们更改配置来告诉 Nginx 来去读。\")]),s._v(\" \"),n(\"li\",[n(\"code\",[s._v(\"/etc/nginx/sites-enabled/sites-available\")]),s._v(\" 这里是存储已经启用站点服务器块的目录。\")]),s._v(\" \"),n(\"li\",[n(\"code\",[s._v(\"/etc/nginx/snippets\")]),s._v(\" 这个目录包含一些 Nginx 的配置文件。可打开详细查看这些配置文件到文档进行学习。\")])]),s._v(\" \"),n(\"h3\",{attrs:{id:\"服务器日志\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#服务器日志\"}},[s._v(\"#\")]),s._v(\" 服务器日志\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[n(\"code\",[s._v(\"/var/log/nginx/access.log\")]),s._v(\" 这里是 Nginx 到日志文件，对 Web 服务器的每个请求都会记录在这个日志中。\")]),s._v(\" \"),n(\"li\",[n(\"code\",[s._v(\"/var/log/nginx/error.log\")]),s._v(\" 记录 Nginx 运行过程中发生的错误日志。\")])]),s._v(\" \"),n(\"h3\",{attrs:{id:\"nginx-配置文件结构以及最佳实践\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#nginx-配置文件结构以及最佳实践\"}},[s._v(\"#\")]),s._v(\" Nginx 配置文件结构以及最佳实践\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[n(\"p\",[s._v(\"所有的 Nginx 配置文件都在\"),n(\"code\",[s._v(\"/etc/nginx/\")]),s._v(\"目录下。\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"主要的 Nginx 配置文件是\"),n(\"code\",[s._v(\"/etc/nginx/nginx.conf\")]),s._v(\"。\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"为每个域名创建一个独立的配置文件，便于维护服务器。你可以按照需要定义任意多的 block 文件。\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"Nginx 服务器配置文件被储存在\"),n(\"code\",[s._v(\"/etc/nginx/sites-available\")]),s._v(\"目录下。在\"),n(\"code\",[s._v(\"/etc/nginx/sites-enabled\")]),s._v(\"目录下的配置文件都将被 Nginx 使用。\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"最佳推荐是使用标准的命名方式。例如，如果你的域名是\"),n(\"code\",[s._v(\"mydomain.com\")]),s._v(\"，那么配置文件应该被命名为\"),n(\"code\",[s._v(\"/etc/nginx/sites-available/mydomain.com.conf\")])])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"如果你在域名服务器配置块中有可重用的配置段，把这些配置段摘出来，做成一小段可重用的配置。\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"Nginx 日志文件(access.log 和 error.log)定位在\"),n(\"code\",[s._v(\"/var/log/nginx/\")]),s._v(\"目录下。推荐为每个服务器配置块，配置一个不同的\"),n(\"code\",[s._v(\"access\")]),s._v(\"和\"),n(\"code\",[s._v(\"error\")]),s._v(\"。\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"你可以将你的网站根目录设置在任何你想要的地方。最常用的网站根目录位置包括：\")])]),s._v(\" \"),n(\"li\",[n(\"ul\",[n(\"li\",[n(\"code\",[s._v(\"/home/<user_name>/<site_name>\")])]),s._v(\" \"),n(\"li\",[n(\"code\",[s._v(\"/var/www/<site_name>\")])]),s._v(\" \"),n(\"li\",[n(\"code\",[s._v(\"/var/www/html/<site_name>\")])]),s._v(\" \"),n(\"li\",[n(\"code\",[s._v(\"/opt/<site_name>\")])])])])]),s._v(\" \"),n(\"h2\",{attrs:{id:\"总结\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#总结\"}},[s._v(\"#\")]),s._v(\" 总结\")]),s._v(\" \"),n(\"p\",[s._v(\"我们已经学习了如何在 Web 服务器中 安装和配置 Nginx 服务。接下来我们会针对 Nginx 的扩展应用展开学习。欢迎关注卡拉搜索网站更多教程。我们已经向你展示了如何在 Ubuntu 20.04 上安装 Nginx。\")]),s._v(\" \"),n(\"p\",[s._v(\"你可以开始部署你的应用，并且使用 Nginx 作为一个网络或者代理服务器。\")])])}),[],!1,null,null,null);a.default=e.exports}}]);","extractedComments":[]}